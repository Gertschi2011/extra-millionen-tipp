<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Extra Millionen Tipp</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>
<body class="container mt-4">
    <header>Extra Millionen Tipp</header>
<main>
    <!-- dein Inhalt hier -->
    <h1>Extra Millionen Tipp</h1>
    <div class="actions mb-3">
        <button class="btn btn-primary me-2" onclick="generateStatisticalTip()">Auto-Tipp (statistisch)</button>
        <button class="btn btn-secondary me-2" onclick="toggleStatistik()">Statistik ein-/ausblenden</button>
        <button class="btn btn-warning me-2" onclick="clearSelection()">Zur√ºcksetzen</button>
        <button class="btn btn-success" onclick="saveTip()">Tipp speichern</button>
        <button class="btn btn-dark me-2" onclick="toggleDarkMode()">üåô Dark Mode</button>
        <button class="btn btn-info" onclick="checkTipAgainstDraws()">Tipp √ºberpr√ºfen</button>
    </div>

    <h2>W√§hle 5 Hauptzahlen</h2>
    <div class="number-grid" id="numberGrid"></div>

    <h2>W√§hle 2 Sternzahlen</h2>
    <div class="star-grid" id="starGrid"></div>

    <div id="savedTipsSection">
        <h3>Gespeicherte Tipps:</h3>
        <ul id="savedTipsList"></ul>
    </div>

    <div id="latestTipsSection">
        <h3>Letzte Tipps:</h3>
        <ul id="latestTipsList"></ul>
    </div>

    <div id="statistik">
        <canvas id="statistikChart" width="400" height="200"></canvas>
        <h3>H√§ufigste Zahlen:</h3>
        <ul id="topNumbersList"></ul>
        <h3>H√§ufigste Sterne:</h3>
        <ul id="topStarsList"></ul>
    </div>

</main>
    <script src="script.js"></script>
    <script>
      // Zeige nur die letzten 5 Tipps in der √úbersicht
      function updateLatestTips() {
          const gespeicherte = JSON.parse(localStorage.getItem("tipps") || "[]");
          const latestTipsList = document.getElementById("latestTipsList");
          latestTipsList.innerHTML = "";
          const letzte = gespeicherte.slice(-5).reverse();
          letzte.forEach(enc => {
              try {
                  const entschluesselt = CryptoJS.AES.decrypt(enc, "geheim").toString(CryptoJS.enc.Utf8);
                  const li = document.createElement("li");
                  li.textContent = entschluesselt;
                  latestTipsList.appendChild(li);
              } catch (e) {
                  console.warn("Fehler beim Entschl√ºsseln eines Tipps:", e);
              }
          });
      }

      // updateLatestTips bei Seitenstart und nach jedem Speichern ausf√ºhren
      document.addEventListener("DOMContentLoaded", updateLatestTips);
      const origSaveTip = saveTip;
      window.saveTip = function() {
          origSaveTip();
          updateLatestTips();
      }
    </script>
    <script>
      (function () {
        const eingabe = prompt("Zugangscode erforderlich:");
        if (eingabe !== "JuliaK") {
            alert("Falscher Code. Zugriff verweigert.");
            window.location.href = "https://www.google.com/";
        }
      })();
    </script>
</body>
</html>